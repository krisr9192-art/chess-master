/**
 * Master Games Database
 *
 * Classic chess games annotated with move-by-move explanations.
 * Each game showcases important strategic and tactical themes.
 */

export interface MoveAnnotation {
  move: string; // SAN notation
  comment?: string;
  isKeyMove?: boolean; // Highlights critical moves
}

export interface MasterGame {
  id: string;
  title: string;
  white: string;
  black: string;
  year: number;
  result: '1-0' | '0-1' | '1/2-1/2';
  event: string;
  description: string;
  themes: string[];
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  moves: MoveAnnotation[];
  keyPositions?: number[]; // Move numbers that are particularly instructive
}

export const masterGames: MasterGame[] = [
  // THE OPERA GAME - Paul Morphy
  {
    id: 'opera-game',
    title: 'The Opera Game',
    white: 'Paul Morphy',
    black: 'Duke of Brunswick & Count Isouard',
    year: 1858,
    result: '1-0',
    event: 'Paris Opera House',
    description: 'Perhaps the most famous chess game ever played. Morphy demonstrates rapid development, piece activity, and a brilliant queen sacrifice.',
    themes: ['Development', 'Piece Activity', 'Sacrifice', 'Attack'],
    difficulty: 'beginner',
    keyPositions: [10, 13, 16],
    moves: [
      { move: 'e4', comment: 'Morphy opens with the king pawn, controlling the center.' },
      { move: 'e5', comment: 'Black mirrors the move.' },
      { move: 'Nf3', comment: 'Developing the knight and attacking e5.' },
      { move: 'd6', comment: 'Philidor Defense - solid but passive.' },
      { move: 'd4', comment: 'Morphy immediately challenges the center.' },
      { move: 'Bg4', comment: 'Black pins the knight, but this develops only one piece while Morphy is ahead in development.' },
      { move: 'dxe5', comment: 'Taking the pawn and opening the position.' },
      { move: 'Bxf3', comment: 'Black captures the knight.' },
      { move: 'Qxf3', comment: 'The queen recaptures, now aiming at f7 and threatening various tactical ideas.' },
      { move: 'dxe5', comment: 'Black recaptures.' },
      { move: 'Bc4', comment: 'Morphy develops with tempo, targeting f7.', isKeyMove: true },
      { move: 'Nf6', comment: 'Finally developing a piece.' },
      { move: 'Qb3', comment: 'Attacking b7 and f7 simultaneously - double attack!', isKeyMove: true },
      { move: 'Qe7', comment: 'Black defends f7 but blocks the bishop.' },
      { move: 'Nc3', comment: 'Morphy continues developing - every piece is active!' },
      { move: 'c6', comment: 'Black tries to solidify but is running out of moves.' },
      { move: 'Bg5', comment: 'Pinning the knight and increasing pressure.', isKeyMove: true },
      { move: 'b5', comment: 'Desperation - trying to drive away the bishop.' },
      { move: 'Nxb5', comment: 'Morphy sacrifices the knight, opening lines.' },
      { move: 'cxb5', comment: 'Black captures.' },
      { move: 'Bxb5+', comment: 'Check! The king is exposed.' },
      { move: 'Nbd7', comment: 'The only move to block.' },
      { move: 'O-O-O', comment: 'Castling with check threat and connecting the rooks.' },
      { move: 'Rd8', comment: 'Black finally castles queenside... or does he? The rook moves.' },
      { move: 'Rxd7', comment: 'Morphy sacrifices the rook!', isKeyMove: true },
      { move: 'Rxd7', comment: 'Black must take.' },
      { move: 'Rd1', comment: 'Doubling rooks and pinning the defender.' },
      { move: 'Qe6', comment: 'Trying to defend.' },
      { move: 'Bxd7+', comment: 'Another sacrifice, removing the defender.', isKeyMove: true },
      { move: 'Nxd7', comment: 'Forced.' },
      { move: 'Qb8+', comment: 'The famous queen sacrifice!', isKeyMove: true },
      { move: 'Nxb8', comment: 'Black must take.' },
      { move: 'Rd8#', comment: 'Checkmate! A back rank mate. Morphy\'s pieces worked in perfect harmony.' },
    ],
  },

  // IMMORTAL GAME
  {
    id: 'immortal-game',
    title: 'The Immortal Game',
    white: 'Adolf Anderssen',
    black: 'Lionel Kieseritzky',
    year: 1851,
    result: '1-0',
    event: 'London',
    description: 'Anderssen sacrifices both rooks and his queen to deliver a spectacular checkmate with only minor pieces.',
    themes: ['Sacrifice', 'Attack', 'King Hunt', 'Brilliancy'],
    difficulty: 'intermediate',
    keyPositions: [18, 19, 22, 23],
    moves: [
      { move: 'e4' },
      { move: 'e5' },
      { move: 'f4', comment: 'The King\'s Gambit - aggressive from the start!' },
      { move: 'exf4', comment: 'Accepting the gambit.' },
      { move: 'Bc4', comment: 'Developing while eyeing f7.' },
      { move: 'Qh4+', comment: 'Black checks immediately.' },
      { move: 'Kf1', comment: 'King loses castling rights but stays safe.' },
      { move: 'b5', comment: 'Bryan Countergambit - sacrificing a pawn for activity.' },
      { move: 'Bxb5', comment: 'Taking the pawn.' },
      { move: 'Nf6', comment: 'Developing with attack on e4.' },
      { move: 'Nf3', comment: 'Kicking the queen.' },
      { move: 'Qh6', comment: 'Queen retreats.' },
      { move: 'd3', comment: 'Solidifying the center.' },
      { move: 'Nh5', comment: 'Knight eyes g3.' },
      { move: 'Nh4', comment: 'Preparing to kick the queen again.' },
      { move: 'Qg5', comment: 'Queen stays active.' },
      { move: 'Nf5', comment: 'Knight joins the attack.' },
      { move: 'c6', comment: 'Kicking the bishop.' },
      { move: 'g4', comment: 'Anderssen ignores the threat and attacks!', isKeyMove: true },
      { move: 'Nf6', comment: 'Knight retreats.' },
      { move: 'Rg1', comment: 'Preparing to open the g-file.' },
      { move: 'cxb5', comment: 'Taking the bishop - a whole piece!' },
      { move: 'h4', comment: 'Continuing the attack, ignoring material.', isKeyMove: true },
      { move: 'Qg6', comment: 'Queen moves again.' },
      { move: 'h5', comment: 'Pushing forward relentlessly.' },
      { move: 'Qg5', comment: 'Queen dances.' },
      { move: 'Qf3', comment: 'Queen comes to help the attack.' },
      { move: 'Ng8', comment: 'Knight runs home.' },
      { move: 'Bxf4', comment: 'Recapturing the pawn with tempo.' },
      { move: 'Qf6', comment: 'Queen tries to exchange.' },
      { move: 'Nc3', comment: 'Developing the last piece.' },
      { move: 'Bc5', comment: 'Black develops.' },
      { move: 'Nd5', comment: 'Powerful outpost!' },
      { move: 'Qxb2', comment: 'Black takes a pawn, ignoring danger.' },
      { move: 'Bd6', comment: 'An incredible move - threatening Bxg8 and allowing Qxa1.', isKeyMove: true },
      { move: 'Bxg1', comment: 'Black takes the rook!' },
      { move: 'e5', comment: 'Opening more lines toward the king.', isKeyMove: true },
      { move: 'Qxa1+', comment: 'Black takes the other rook with check!' },
      { move: 'Ke2', comment: 'King steps aside.' },
      { move: 'Na6', comment: 'Trying to develop.' },
      { move: 'Nxg7+', comment: 'Knight check!' },
      { move: 'Kd8', comment: 'King flees.' },
      { move: 'Qf6+', comment: 'Queen sacrifice!', isKeyMove: true },
      { move: 'Nxf6', comment: 'Forced to take.' },
      { move: 'Be7#', comment: 'Checkmate with the bishop! After sacrificing both rooks and the queen, Anderssen mates with minor pieces only.' },
    ],
  },

  // GAME OF THE CENTURY
  {
    id: 'game-of-century',
    title: 'Game of the Century',
    white: 'Donald Byrne',
    black: 'Bobby Fischer',
    year: 1956,
    result: '0-1',
    event: 'Rosenwald Memorial',
    description: '13-year-old Bobby Fischer plays a stunning queen sacrifice leading to a remarkable combination against a strong master.',
    themes: ['Queen Sacrifice', 'Combination', 'Youth', 'Brilliancy'],
    difficulty: 'advanced',
    keyPositions: [11, 17, 18, 24],
    moves: [
      { move: 'Nf3', comment: 'Reti Opening.' },
      { move: 'Nf6' },
      { move: 'c4', comment: 'English-Reti hybrid.' },
      { move: 'g6', comment: 'Fischer plays hypermodern style.' },
      { move: 'Nc3', comment: 'Developing.' },
      { move: 'Bg7' },
      { move: 'd4', comment: 'Now it\'s a Queen\'s Pawn game.' },
      { move: 'O-O' },
      { move: 'Bf4', comment: 'London System setup.' },
      { move: 'd5', comment: 'Fischer strikes in the center.' },
      { move: 'Qb3', comment: 'Attacking b7 and d5.' },
      { move: 'dxc4', comment: 'Taking the pawn.' },
      { move: 'Qxc4', comment: 'Queen recaptures.' },
      { move: 'c6', comment: 'Solidifying.' },
      { move: 'e4', comment: 'Grabbing more space.' },
      { move: 'Nbd7', comment: 'Developing.' },
      { move: 'Rd1', comment: 'Centralizing.' },
      { move: 'Nb6', comment: 'Attacking the queen.' },
      { move: 'Qc5', comment: 'Queen retreats.' },
      { move: 'Bg4', comment: 'Pinning the knight.' },
      { move: 'Bg5', comment: 'Counter-pin!' },
      { move: 'Na4', comment: 'Knight attacks the queen!', isKeyMove: true },
      { move: 'Qa3', comment: 'Queen retreats again.' },
      { move: 'Nxc3', comment: 'Taking the knight.' },
      { move: 'bxc3', comment: 'Recapturing.' },
      { move: 'Nxe4', comment: 'Winning a pawn!' },
      { move: 'Bxe7', comment: 'Taking back material.' },
      { move: 'Qb6', comment: 'The queen sacrifice begins!', isKeyMove: true },
      { move: 'Bc4', comment: 'Blocking.' },
      { move: 'Nxc3', comment: 'Discovered attack!' },
      { move: 'Bc5', comment: 'Attacking the queen.' },
      { move: 'Rfe8+', comment: 'Check!' },
      { move: 'Kf1', comment: 'King moves.' },
      { move: 'Be6', comment: 'The windmill begins!', isKeyMove: true },
      { move: 'Bxb6', comment: 'White takes the queen!' },
      { move: 'Bxc4+', comment: 'Check! The combination continues.' },
      { move: 'Kg1', comment: 'King escapes.' },
      { move: 'Ne2+', comment: 'Fork!' },
      { move: 'Kf1', comment: 'King moves.' },
      { move: 'Nxd4+', comment: 'Taking the rook with check!' },
      { move: 'Kg1', comment: 'Back and forth.' },
      { move: 'Ne2+', comment: 'Check again!' },
      { move: 'Kf1', comment: 'Forced.' },
      { move: 'Nc3+', comment: 'Another check!' },
      { move: 'Kg1', comment: 'King keeps dancing.' },
      { move: 'axb6', comment: 'Finally taking the bishop.' },
      { move: 'Qb4', comment: 'White tries to counterplay.' },
      { move: 'Ra4', comment: 'Trapping the queen!' },
      { move: 'Qxb6', comment: 'Queen escapes.' },
      { move: 'Nxd1', comment: 'Taking the rook.' },
      { move: 'h3', comment: 'Trying to create luft.' },
      { move: 'Rxa2', comment: 'Collecting pawns.' },
      { move: 'Kh2', comment: 'King hides.' },
      { move: 'Nxf2', comment: 'Fork!' },
      { move: 'Re1', comment: 'Trying to save something.' },
      { move: 'Rxe1', comment: 'Exchanging.' },
      { move: 'Qd8+', comment: 'Check.' },
      { move: 'Bf8', comment: 'Blocking.' },
      { move: 'Nxh3', comment: 'Taking another pawn.' },
      { move: 'Qd3', comment: 'Attack!' },
      { move: 'Re1', comment: 'Domination.' },
      { move: 'Resign', comment: 'White resigns. At 13, Fischer proved he was a force to be reckoned with.' },
    ],
  },

  // KASPAROV VS TOPALOV
  {
    id: 'kasparov-topalov',
    title: "Kasparov's Immortal",
    white: 'Garry Kasparov',
    black: 'Veselin Topalov',
    year: 1999,
    result: '1-0',
    event: 'Wijk aan Zee',
    description: 'Kasparov plays one of the most brilliant attacking games in history, sacrificing his rook for a devastating attack.',
    themes: ['Attack', 'Rook Sacrifice', 'King Hunt', 'Calculation'],
    difficulty: 'advanced',
    keyPositions: [24, 25, 32, 37],
    moves: [
      { move: 'e4' },
      { move: 'd6', comment: 'Pirc Defense.' },
      { move: 'd4' },
      { move: 'Nf6' },
      { move: 'Nc3' },
      { move: 'g6' },
      { move: 'Be3' },
      { move: 'Bg7' },
      { move: 'Qd2' },
      { move: 'c6' },
      { move: 'f3' },
      { move: 'b5' },
      { move: 'Nge2' },
      { move: 'Nbd7' },
      { move: 'Bh6', comment: 'Exchanging the fianchettoed bishop.' },
      { move: 'Bxh6' },
      { move: 'Qxh6' },
      { move: 'Bb7' },
      { move: 'a3' },
      { move: 'e5' },
      { move: 'O-O-O' },
      { move: 'Qe7' },
      { move: 'Kb1' },
      { move: 'a6' },
      { move: 'Nc1', comment: 'Rerouting the knight.' },
      { move: 'O-O-O', comment: 'Both kings castle queenside.' },
      { move: 'Nb3' },
      { move: 'exd4' },
      { move: 'Rxd4', comment: 'The rook comes to the center.' },
      { move: 'c5' },
      { move: 'Rd1' },
      { move: 'Nb6' },
      { move: 'g3', comment: 'Preparing a break.' },
      { move: 'Kb8' },
      { move: 'Na5', comment: 'The knight heads for b7.' },
      { move: 'Ba8', comment: 'The bishop retreats.' },
      { move: 'Bh3', comment: 'Targeting d7.' },
      { move: 'd5', comment: 'Black plays actively.' },
      { move: 'Qf4+', comment: 'Check!' },
      { move: 'Ka7' },
      { move: 'Re1', comment: 'Bringing the last piece into the attack.' },
      { move: 'd4' },
      { move: 'Nd5', comment: 'The knight joins centrally.' },
      { move: 'Nbxd5' },
      { move: 'exd5' },
      { move: 'Qd6' },
      { move: 'Rxd4', comment: 'Kasparov sacrifices the rook!', isKeyMove: true },
      { move: 'cxd4' },
      { move: 'Re7+', comment: 'Double check with the rook!', isKeyMove: true },
      { move: 'Kb6', comment: 'The king hunt begins.' },
      { move: 'Qxd4+', comment: 'Check!' },
      { move: 'Kxa5', comment: 'King runs.' },
      { move: 'b4+', comment: 'Pawn check!' },
      { move: 'Ka4' },
      { move: 'Qc3', comment: 'Threatening mate.' },
      { move: 'Qxd5', comment: 'Black tries to counter.' },
      { move: 'Ra7', comment: 'The quiet rook move is deadly.', isKeyMove: true },
      { move: 'Bb7' },
      { move: 'Rxb7', comment: 'Removing the defender.' },
      { move: 'Qc4' },
      { move: 'Qxf6', comment: 'Taking the knight.' },
      { move: 'Kxa3' },
      { move: 'Qxa6+', comment: 'Check!' },
      { move: 'Kxb4' },
      { move: 'c3+', comment: 'Another pawn check!' },
      { move: 'Kxc3' },
      { move: 'Qa1+', comment: 'The final phase.' },
      { move: 'Kd2' },
      { move: 'Qb2+', comment: 'Chasing the king.' },
      { move: 'Kd1' },
      { move: 'Bf1', comment: 'Cutting off escape.' },
      { move: 'Rd2' },
      { move: 'Rd7', comment: 'The rook dominates.' },
      { move: 'Rxd7' },
      { move: 'Bxc4', comment: 'Clearing lines.' },
      { move: 'bxc4' },
      { move: 'Qxh8', comment: 'Taking the rook.' },
      { move: 'Rd3' },
      { move: 'Qa8', comment: 'The queen returns.' },
      { move: 'c3' },
      { move: 'Qa4+', comment: 'Check!' },
      { move: 'Ke1' },
      { move: 'f4', comment: 'Cutting escape routes.' },
      { move: 'f5' },
      { move: 'Kc1', comment: 'King runs.' },
      { move: 'Rd2', comment: 'Threatening mate.' },
      { move: 'Qa7', comment: 'Topalov resigns. One of the greatest attacking games ever played.', isKeyMove: true },
    ],
  },

  // EVERGREEN GAME
  {
    id: 'evergreen-game',
    title: 'The Evergreen Game',
    white: 'Adolf Anderssen',
    black: 'Jean Dufresne',
    year: 1852,
    result: '1-0',
    event: 'Berlin',
    description: 'Another Anderssen masterpiece featuring multiple piece sacrifices and a beautiful mating combination.',
    themes: ['Attack', 'Sacrifice', 'Combination', 'Italian Game'],
    difficulty: 'intermediate',
    keyPositions: [19, 20, 23, 24],
    moves: [
      { move: 'e4' },
      { move: 'e5' },
      { move: 'Nf3' },
      { move: 'Nc6' },
      { move: 'Bc4', comment: 'Italian Game - a favorite of attacking players.' },
      { move: 'Bc5' },
      { move: 'b4', comment: 'The Evans Gambit!' },
      { move: 'Bxb4' },
      { move: 'c3', comment: 'Forcing the bishop back.' },
      { move: 'Ba5' },
      { move: 'd4', comment: 'Opening the center with tempo.' },
      { move: 'exd4' },
      { move: 'O-O', comment: 'Castling and completing development.' },
      { move: 'd3', comment: 'Black tries to keep the extra pawn.' },
      { move: 'Qb3', comment: 'Attacking f7 and b4.' },
      { move: 'Qf6' },
      { move: 'e5', comment: 'Pushing forward!' },
      { move: 'Qg6' },
      { move: 'Re1', comment: 'Centralizing the rook.' },
      { move: 'Nge7' },
      { move: 'Ba3', comment: 'Preventing castling!', isKeyMove: true },
      { move: 'b5', comment: 'Trying to close the diagonal.' },
      { move: 'Qxb5', comment: 'Taking the pawn.' },
      { move: 'Rb8' },
      { move: 'Qa4', comment: 'Queen stays active.' },
      { move: 'Bb6' },
      { move: 'Nbd2', comment: 'Developing the last piece.' },
      { move: 'Bb7' },
      { move: 'Ne4', comment: 'Knight leaps to a strong square.', isKeyMove: true },
      { move: 'Qf5', comment: 'Attacking the knight.' },
      { move: 'Bxd3', comment: 'Taking the advanced pawn.' },
      { move: 'Qh5' },
      { move: 'Nf6+', comment: 'Knight sacrifice!', isKeyMove: true },
      { move: 'gxf6' },
      { move: 'exf6', comment: 'Opening the e-file.' },
      { move: 'Rg8' },
      { move: 'Rad1', comment: 'Both rooks are now active.' },
      { move: 'Qxf3', comment: 'Black grabs the knight.' },
      { move: 'Rxe7+', comment: 'Rook sacrifice!', isKeyMove: true },
      { move: 'Nxe7' },
      { move: 'Qxd7+', comment: 'Queen checks!' },
      { move: 'Kxd7' },
      { move: 'Bf5+', comment: 'Bishop check!' },
      { move: 'Ke8' },
      { move: 'Bd7+', comment: 'Another check!' },
      { move: 'Kf8' },
      { move: 'Bxe7#', comment: 'Checkmate! A beautiful finish after sacrificing the queen and rook.' },
    ],
  },

  // SIMPLE WIN
  {
    id: 'simple-endgame',
    title: 'King and Pawn Endgame',
    white: 'Instructional',
    black: 'Instructional',
    year: 2000,
    result: '1-0',
    event: 'Endgame Study',
    description: 'A fundamental king and pawn endgame showing the opposition and how to promote a pawn.',
    themes: ['Endgame', 'Opposition', 'Pawn Promotion', 'Technique'],
    difficulty: 'beginner',
    keyPositions: [1, 3, 5],
    moves: [
      { move: 'Ke2', comment: 'White takes the opposition.', isKeyMove: true },
      { move: 'Ke7', comment: 'Black tries to block.' },
      { move: 'Ke3', comment: 'White advances maintaining opposition.' },
      { move: 'Ke6', comment: 'Black must give way.' },
      { move: 'Ke4', comment: 'Opposition again!', isKeyMove: true },
      { move: 'Kf6', comment: 'Black tries to outflank.' },
      { move: 'Kd5', comment: 'White advances the king first.', isKeyMove: true },
      { move: 'Ke7', comment: 'Black defends.' },
      { move: 'Ke5', comment: 'White keeps the opposition.' },
      { move: 'Kd7', comment: 'Black gives way.' },
      { move: 'Kf6', comment: 'Outflanking the black king.' },
      { move: 'Ke8', comment: 'Defending the promotion square.' },
      { move: 'e4', comment: 'Now the pawn advances.' },
      { move: 'Kf8', comment: 'Trying to stop the pawn.' },
      { move: 'e5', comment: 'Pushing forward.' },
      { move: 'Ke8', comment: 'Coming back.' },
      { move: 'Ke6', comment: 'Opposition!' },
      { move: 'Kf8', comment: 'Black must move away.' },
      { move: 'Kf6', comment: 'Maintaining opposition.' },
      { move: 'Ke8', comment: 'Black is in zugzwang.' },
      { move: 'e6', comment: 'The pawn queens next move.' },
    ],
  },
];

export function getMasterGameById(id: string): MasterGame | undefined {
  return masterGames.find(g => g.id === id);
}

export function getMasterGamesByDifficulty(difficulty: 'beginner' | 'intermediate' | 'advanced'): MasterGame[] {
  return masterGames.filter(g => g.difficulty === difficulty);
}
